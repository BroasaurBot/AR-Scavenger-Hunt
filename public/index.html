<!DOCTYPE html>
<html>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./index.css">
  <head>
  </head>

  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

  <script src="./js/info.js"></script>
  <script src="./js/firebase.js" type="module"></script>
  <script src="./js/markerEvents.js" type="module"></script>
  <script src="./js/progress.js" type="module"></script>
  <script src="./js/topbar.js" type="module"></script>

 

  <body style="margin: 0px; overflow: hidden;">
    <div id="root"></div>

    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3_PARITY65;' vr-mode-ui="enabled: false">
        <a-marker markerhandler type="barcode" value="0" smooth="true">
            <a-entity
                position="0 0 0"
                scale="1 1 1"
                gltf-model="/models/shiba/scene.gltf"
                animation = "property: rotation; to: 0 360 0; loop: true; dur: 10000"
            ></a-entity>
        </a-marker>
        <a-marker markerhandler type="barcode" value="1" smooth="true">
            <a-entity
                position="0 0 -1"
                scale="1 1 1"
                rotation="270 0 0"
                gltf-model="/models/painting/scene.gltf"
            ></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>


  <div class="popup" id="topbar">
    <div id="signIn" class="hide">
      <p>Please <span style="font-weight:bold">sign in</span> to track progress</p>
      <button class="button">
        <img src="./icons/login.png" alt="Sign In">
      </button>
    </div>

    <div id="tooltip" class="hide">
      <p></p>
    </div>

    <div id="progress" class="hide">
      <div id="collected">
        <h4>Markers Collected: </h4>
        <div id="progressBar">
          <div id="progressBarFill"></div>
        </div>
        <p id="count"></p>
      </div>

      <div id="pointsInfo">

        <div id="pointsprize">
          <div id="points"></div>
          <div id="prize"></div>
        </div>

        <div id="motivation"></div>
      </div>
    </div>

  </div> 

  <div class="popup hide" id="bottombar">
    <div id="marker-inspector">
      <button id="interact" class="">
        <img src="./icons/library_add.png" alt="add">
      </button>
      <p>
        Go search for a marker
      </p>
      <button id="information" class="">
        <img src="./icons/info.png" id='info' alt="info">
        <img src="./icons/close.png" id='close' class="hide" alt="info">
      </button>
    </div>
  </div>


  </body>
  <script>
    // Workaround for an AR.js bug (https://github.com/jeromeetienne/AR.js/issues/410)
    const sceneEl = document.querySelector('a-scene');
    sceneEl.addEventListener('loaded', () => {
    sceneEl.camera = new THREE.PerspectiveCamera();
    });
  </script>

</html>
